{% extends 'pagina/base_corporativo.html' %}
{% load staticfiles %}
{% load user_tags %}
{% block title %} Lista de pabellones {% endblock %}

{%  block content %}

{% if request.user|has_group:"administrativo" %}

<ul class="breadcrumb breadcrumbStyle">
  <li class="breadcrumb-item"><i class="fas fa-users"></i> Pabellón / </li>
  <li class="breadcrumb-itemAdmin active"> Lista de Pabellones</li>
</ul>

<h1 class="mt-4 text-center titleIniBoxAdmin"><i class="fas fa-users"></i> Lista de Pabellones</h1>

<br>

<div class="table-responsive tableResStyle">
  <table class="table table-striped table-bordered table-striped" id="ejemplo">
     <thead class="theadStyle theadStyleOrange">
       <tr>
         <th>Nombre</th>
         <th>Descripción</th>
         <th>Acciones</th>
       </tr>
     </thead>
     <tbody class="text-center">
     {% for row in pabellon %}
       <tr>
         <td>{{ row.nombre }}</td>
         <td>{{ row.descripcion }}</td>
         <td>
           <!-- <a class="btn btn-green btn-sm" href="#" > Detalles </a> -->
           <a class="btn btn-orange btn-sm" href="#" > Editar </a>
         </td>
       </tr>
       {% empty %}
       <tr>
         <td colspan="6" class="text-center bg-warning">No hay pabellones registrados</td>
       </tr>
     {% endfor %}
     </tbody>
   </table>
 </div>

 {% endif %}

 {% if request.user|has_group:"propietario_negocio" %}
 	<p>Lo siento, no tiene permisos para este contenido :(</p>
 {% endif %}
 {% if request.user|has_group:"empleado_negocio" %}
 	<p>Lo siento, no tiene permisos para este contenido :(</p>
 {% endif %}

 {% endblock %}

 {% block javascript %}
<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.bootstrap4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.colVis.min.js"></script>
<script src="{% static 'js/manejoDataTable.js' %}"></script>
<script>
  var table = $('#ejemplo').DataTable( {
     "paging": true,
     "lengthChange": true,
     "searching": true,
     "ordering": true,
     "info": true,
     "autoWidth": true,
     "language": idioma,
     "lengthMenu": [[5,10,20, -1],[5,10,50,"Mostrar Todo"]],
     dom: 'Bfrt<"col-md-6 inline"i> <"col-md-6 inline"p>',
     buttons: {
           dom: {
             container:{
               tag:'div',
               className:'flexcontent'
             },
             buttonLiner: {
               tag: null
             }
           },

           buttons: [
               {
                   extend:    'copyHtml5',
                   text:      '<i class="fa fa-clipboard"></i> Copiar',
                   title:'Lista de pabellones copiada',
                   titleAttr: 'Copiar',
                   className: 'btn btn-app export copia',
                   exportOptions: {
                       columns: [ 0, 1 ]
                   }
               },
               {
                   extend:    'pdfHtml5',
                   text:      '<i class="fas fa-file-pdf"></i>PDF',
                   title:'Lista de Pabellones ',
                   titleAttr: 'PDF',
                   className: 'btn btn-app export pdf',
                   exportOptions: {
                       columns: [ 0, 1 ]
                   },
                   customize:function(doc) {

                       doc.styles.title = {
                           color: '#4c8aa0',
                           fontSize: '30',
                           alignment: 'center'
                       }
                       doc.styles['td:nth-child(2)'] = {
                           width: '100px',
                           'max-width': '100px'
                       },
                       doc.styles.tableHeader = {
                           fillColor:'#4c8aa0',
                           color:'white',
                           alignment:'center'
                       },
                       doc.content[1].margin = [ 100, 0, 100, 0 ]

                   }
               },

               {
                   extend:    'excelHtml5',
                   text:      '<i class="fas fa-file-excel"></i>Excel',
                   title:'Lista de Pabellones',
                   titleAttr: 'Excel',
                   className: 'btn btn-app export excel',
                   exportOptions: {
                       columns: [ 0, 1 ]
                   },
               },
               {
                   extend:    'csvHtml5',
                   text:      '<i class="fas fa-file-csv"></i>CSV',
                   title:'Lista de Pabellones',
                   titleAttr: 'CSV',
                   className: 'btn btn-app export csv',
                   exportOptions: {
                       columns: [ 0, 1 ]
                   }
               },
               {
                   extend:    'print',
                   text:      '<i class="fas fa-print"></i>Imprimir',
                   title:'Lista de Pabellones',
                   titleAttr: 'Imprimir',
                   className: 'btn btn-app export imprimir',
                   exportOptions: {
                       columns: [ 0, 1 ]
                   }
               },
               {
                   extend:    'pageLength',
                   titleAttr: 'Registros a mostrar',
                   className: 'selectTable'
               }
           ]
         }
     });
</script>
 {% endblock %}
