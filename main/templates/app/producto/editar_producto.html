{% extends 'app/base_app.html' %}
{% load staticfiles %}
{% block title %} Detalle del producto {% endblock %}

{%  block content %}

<ul class="breadcrumb breadcrumbStyle">
  <li class="breadcrumb-item"><i class="fas fa-carrot"></i> Productos</li>
  <li class="breadcrumb-item">Lista de productos</li>
  <li class="breadcrumb-item active">Detalle del producto</li>
</ul>

<h1 class="mt-4 text-center titleIniBox"><i class="fas fa-carrot"></i> Detalle del producto</h1>

<br>

<div class="table-responsive tableResStyle">
 <table class="table table-striped table-bordered table-striped">
    <thead class="theadStyle">
      <tr>
        <!-- <th>Código</th> -->
        <th>Nombre</th>
        <th>Stock</th>
        <th>Costo</th>
        <th>Venta</th>
        <th>Imagen</th>
        <th>Proveedor Inicial</th>
        <th>Descripción</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody class="text-center">
    {% for row in detalle_producto_negocio %}
      <tr>
        <!-- <td>{{ row.producto_id.codigo }}</td> -->
        <td>{{ row.producto_id.nombre }}</td>
        <td>{{ row.producto_id.stock }}</td>
        <td>$ {{ row.producto_id.valor_costo }}</td>
        <td>$ {{ row.producto_id.valor_venta }}</td>
        {% if row.producto_id.imagen %}
        <td> <img src="/media/{{ row.producto_id.imagen }}" class="img-fluid" style="max-width: 150px; max-height: 120px;">  </td>
        {% else %}
        <td> <img src="{% static 'img/nofoto.png' %}" class="img-fluid" style="max-width: 50px;"> </td>
        {% endif %}
        <td>{{ row.proveedor_id.razon_social }}</td>
        <td>{{ row.producto_id.descripcion }}</td>
        <td>
          <a class="btn btn-green btn-sm" data-toggle="modal" data-target="#editarmodal">Editar</a>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>

 <br>
 <h5 class="mt-4 titleSubBox">Detalle de las compras realizadas al producto</h5>

 <div class="table-responsive tableResStyle">
  <table class="table table-striped table-bordered table-striped">
     <thead class="theadStyleColore theadStyle">
        <tr>
          <th>Fecha de la compra</th>
          <th>Proveedor</th>
          <th>Cantidad</th>
          <th>Valor unitario</th>
        </tr>
      </thead>
      <tbody class="text-center">
      {% for row in detalle_compra_producto %}
        <tr>
          <td>{{ row.compra_id.fecha|date:"SHORT_DATE_FORMAT" }}</td>
          <td>{{ row.proveedor_id.razon_social }}</td>
          <td>{{ row.cantidad }}</td>
          <td>$ {{ row.valor_unitario }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-center bg-warning">No hay compras realizadas del producto</td>
        </tr>
      {% endfor %}
      </tbody>
  </table>
</div>

<!-- Modal Editar -->
  <div class="modal fade" id="editarmodal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content modalContentStyle">
        <!-- Modal Header -->
        <div class="modal-header modalHeaderStyle">
          <h4 class="modal-title">Editar Producto</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <!-- Modal body -->
        <div class="modal-body">
          <div class="container">
            <form class="form" method="POST"  id="formulario_registro_producto" enctype="multipart/form-data">
              {% csrf_token %}
              {{ form.as_p }}
              {{ form2.as_p }}

              <!-- <div class="form-group">
                <select class="form-control" name='usuario_proveedor' required="required">
                  <option value="">Seleccionar</option>
                  <!-- <option value="">Seleccionar</option> -->
                  <!-- {% for row in form2 %} -->
                    <!-- <option value="{{ row.proveedor_id.id }}"> {{ row.proveedor_id.razon_social }} </option> -->
                  <!-- {% endfor %} -->
                <!-- </select> -->
              <!-- </div> -->

                <button class="save btn btn-green btn-lg" type="submit">Guardar</button>
                <br><br>
            </form>
          </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-red" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

 {% endblock %}
